-if @sample.barcode.nil?
    %em{:style => "color: red;" } Tip: If this is a child (ex. aliquot, extract) sample of an existing sample, locate the existing one and create child(ren) from that level.

=simple_form_for @sample, html: {class: 'form-horizontal'} do |f|
    =field_set_tag "Basic Information" do
        =f.input :name, hint: "Should be descriptive, eg. sample_tissue_condition_replicate"
        - if @sample.barcode
            =f.input :barcode, disabled: true, hint: "Barcodes are permanent. If you really want to change it, then contact the site admin."
        - else
            =f.input :barcode, disabled: true, hint: "Barcodes are automatically generated"
        =f.association :taxon, label_method: :scientific_name, hint: link_to("Create a new taxon", new_taxon_url, :target => "_blank")
        =f.input :source_name, :label => "Subject (source)", hint: "eg. mouse123, mlims_id, or study_id_&_subject_id for clinical studies"
        /TODO
        =f.association :material_types, :multiple => true, hint: link_to("Create a new material type", new_material_type_url, :target => "_blank") + ", eg. whole organism, blood, urine"
        =f.association :studies, :multiple => true, hint: link_to("Create a new study", new_study_url, :target => "_blank")
        =f.association :sex, collection: Sample.where(retired: false).gender_type_terms.order('name'), hint: link_to("Create a new biological sex/mating type", new_ontology_term_url, :target => "_blank")
        =f.label :parent
        =f.collection_select :parent_id, Sample.all, :id, :name, :include_blank => true
        %br
        %br
        =f.input :retired, hint: "Enable if the sample is to be retired, eg. the sample is used or split"

    =field_set_tag "Container for sample" do
        /TODO
        / http://www.petermac.com/rails-3-jquery-and-multi-select-dependencies/
        / = f.input :container_id, collection: Container.non_retired.where(:ancestry_depth => 0).order(:name).all.collect{ |c| [c.name,c.id]}
        / %div{:id=>"addressLaboratories"}
        /     = render :partial => 'laboratories'
        / %div{:id=>"addressFreezers"}
        /     = render :partial => 'freezers'
        / %div{:id=>"addressBoxes"}
        /     = render :partial => 'boxes'
        / %div{:id=>"addressTubes"}
        /     = render :partial => 'tubes'

        / http://www.samuelmullen.com/2011/02/dynamic-dropdowns-with-rails-jquery-and-ajax/
        / =f.collection_select :container_id, :container, @containers, :id, :name, :input_html => {:rel => "/containers/child_containers_by_depth"}
        / =f.collection_select :container_id, :child_container, @child_containers, :id, :name

        =f.association :container, collection: Container.shipable, hint: link_to("Create a new container", new_container_url, :target => "_blank"), label_method: :to_s
        /=f.association :container_type, collection: ContainerType.order('container_type.type_id, name').all, hint: link_to("Create a new container type", new_container_type_url, :target => "_blank")
        /=f.association :container, collection: Container.empty_non_tube.order('containers.container_type_id, name').all, hint: link_to("Create a new container", new_container_url, :target => "_blank"), label_method: :to_s
        ==Choose the position of the sample in the plate. The origin is at the top left corner, starts with zero. 
        %br
        Tubes only have one position (0,0).
        %br
        %br
        =f.input :container_x, :label => "x-coordinate", hint: "eg. for 96 well plate choose between 1-12 on the x-axis"
        =f.input :container_y, :label => "y-coordinate", hint: 'eg. for 96 well plate choose between A-H on the y-axis'

    =field_set_tag "Other Annotations" do

        =f.input :tags, hint: 'Press "Tab" key to enter a tag. Delete by clicking each tags "x"'
        =f.input :notes
    %fieldset
        =f.button :submit
        =link_to 'Cancel', @sample, class: 'btn btn-warning'

= content_for :js do
    :javascript
        $("#sample_tags").tagsInput()


